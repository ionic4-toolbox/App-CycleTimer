<!--
  Generated template for the BaseTemplatePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{item.TemplateName}} Study</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding class="content">
  <form #form="ngForm" (ngSubmit)="beginStudy(form, item.TemplateName, ListFields)" novalidate>
    <!-- <div *ngIf="item.TemplateName !== 'Drilling'"> -->
    <ion-card class="card">
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col col-5>
              <ion-label style="white-space: pre-wrap;">Study Name</ion-label>
            </ion-col>
            <ion-col col-7>
              <ion-input class="borderInput" [(ngModel)]="form.StudyName" name="StudyName" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Study Description</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-textarea class="borderInput" [(ngModel)]="form.StudyDescription" name="StudyDescription" rows="3"></ion-textarea>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-5>
              <ion-label style="white-space: pre-wrap;">Prepared For</ion-label>
            </ion-col>
            <ion-col col-7>
              <ion-input class="borderInput" [(ngModel)]="form.PreparedFor" name="PreparedFor" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-5>
              <ion-label style="white-space: pre-wrap;">Prepared By</ion-label>
            </ion-col>
            <ion-col col-7>
              <ion-input class="borderInput" [(ngModel)]="form.PreparedBy" name="PreparedBy" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-6>
              <ion-label>Study Date</ion-label>
            </ion-col>
            <ion-col col-6>
              <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="studyDate" name="StudyDate"></ion-datetime>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card class="card">
      <ion-card-content>
        <ion-grid>

          <ion-row>
            <ion-col col-5>
              <ion-label style="white-space: pre-wrap;">Material Type</ion-label>
            </ion-col>
            <ion-col col-7>
              <ion-select class="borderInput" style="max-width: 100%;" [(ngModel)]="form.MaterialType" name="MaterialType">
                <ion-option *ngFor="let material of materialType">{{material.MaterialName}}</ion-option>
              </ion-select>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Material Density</ion-label>
            </ion-col>
          </ion-row>
            <ion-row>
              <ion-col col-5>
                <ion-label>Lbs/BCY</ion-label>
              </ion-col>
              <ion-col col-7>
                <ion-input class="borderInput" [(ngModel)]="form.MaterialDensityLbsBcy" name="MaterialDensityLbsBcy" type="number"></ion-input>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col col-5>
                <ion-label>Lbs/BCY</ion-label>
              </ion-col>
              <ion-col col-7>
                <ion-input class="borderInput" [(ngModel)]="form.MaterialDensityLbsLcy" name="MaterialDensityLbsLcy" type="number"></ion-input>
              </ion-col>
            </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Blast (Reference Only)</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-textarea class="borderInput" [(ngModel)]="form.Blast" name="Blast" rows="2"></ion-textarea>
            </ion-col>
          </ion-row>

        </ion-grid>
      </ion-card-content>
    </ion-card>
  <!-- </div> -->
    <ion-card>
      <ion-card-content>
        <ion-grid>
          <ion-row *ngFor="let field of ListFields; let i = index">

            <!-- Set template for input Textbox and Number -->
            <ion-col *ngIf="field.FieldType !== fieldsType.FieldToggle" col-5>
              <ion-label style="white-space: pre-wrap;">{{field.FieldName}}</ion-label>
            </ion-col>

            <ion-col *ngIf="field.FieldType == fieldsType.FieldTextBox" col-7>
              <ion-input  (ngModel)="form.text.field.FieldName" class="borderInput" name="{{field.FieldNameKey}}" required></ion-input>
            </ion-col>

            <ion-col *ngIf="field.FieldType == fieldsType.FieldOption" col-7>
              <ion-select class="borderInput" style="max-width: 100%;" (ngModel)="form.option.field.FieldName" name="{{field.FieldNameKey}}" >
                <ion-option *ngFor="let option of field.ListOption" [value]="option.OptionName">{{option.OptionName}}</ion-option>
              </ion-select>
            </ion-col>

            <ion-col *ngIf="field.FieldType == fieldsType.FieldNumber" col-5>
              <ion-input *ngIf="field.FieldType == fieldsType.FieldNumber" type="number" class="borderInput" (ngModel)="form.number.field.FieldName" name="{{field.FieldNameKey}}" required></ion-input>
            </ion-col>

            <ion-col *ngIf="field.FieldType == fieldsType.FieldNumber" col-2>
              <ion-label>LCY</ion-label>
            </ion-col>

            <!-- Set template for toggle -->
            <ion-col *ngIf="field.FieldType === fieldsType.FieldToggle" col-7>
              <ion-label style="white-space: pre-wrap;">{{field.FieldName}}</ion-label>
            </ion-col>

            <ion-col *ngIf="field.FieldType === fieldsType.FieldToggle" col-5>
              <ion-toggle *ngIf="field.FieldType == fieldsType.FieldToggle" (ngModel)="form.option.field.FieldName" name="{{field.FieldNameKey}}" checked="{{checked}}" ></ion-toggle>
            </ion-col>
            
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
    <ion-card class="card">
      <ion-card-header>
        <ion-label> Segments </ion-label>
      </ion-card-header>
      <ion-card-content>
        <ion-list >
          <ion-item *ngFor="let segments of listSegments">
            {{segments.SectionName}}
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-grid>
      <ion-row text-center>
        <ion-col col-12>
          <button ion-button round outline type="submit"> Begin Study </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
