<!--
  Generated template for the BaseTemplatePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{item.TemplateName}} Study</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding class="content">
  <form #form="ngForm" (ngSubmit)="beginStudy(form, item.TemplateName, ListFields)" novalidate>
    <ion-card class="card">
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col col-4>
              <ion-label>Study Name</ion-label>
            </ion-col>
            <ion-col col-8>
              <ion-input class="borderInput" [(ngModel)]="form.StudyName" name="StudyName" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Study Description</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-textarea class="borderInput" [(ngModel)]="form.StudyDescription" name="StudyDescription" rows="3"></ion-textarea>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-4>
              <ion-label>Prepared For</ion-label>
            </ion-col>
            <ion-col col-8>
              <ion-input class="borderInput" [(ngModel)]="form.PreparedFor" name="PreparedFor" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-4>
              <ion-label>Prepared By</ion-label>
            </ion-col>
            <ion-col col-8>
              <ion-input class="borderInput" [(ngModel)]="form.PreparedBy" name="PreparedBy" required></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col col-4>
              <ion-label>Study Date</ion-label>
            </ion-col>
            <ion-col col-8>
              <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="studyDate" name="StudyDate"></ion-datetime>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card class="card">
      <ion-card-content>
        <ion-grid>

          <ion-row>
            <ion-col col-4>
              <ion-label>Material Type</ion-label>
            </ion-col>
            <ion-col col-8>
              <ion-select class="borderInput" [(ngModel)]="form.MaterialType" name="MaterialType">
                <ion-option *ngFor="let material of materialType">{{material.MaterialName}}</ion-option>
              </ion-select>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Material Density</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-row col-6>
              <ion-col>
                <ion-label>Lbs/BCY</ion-label>
              </ion-col>
              <ion-col>
                <ion-input class="borderInput" [(ngModel)]="form.MaterialDensityLbsBcy" name="MaterialDensityLbsBcy" type="number"></ion-input>
              </ion-col>
            </ion-row>

            <ion-row col-6>
              <ion-col>
                <ion-label>Lbs/BCY</ion-label>
              </ion-col>
              <ion-col>
                <ion-input class="borderInput" [(ngModel)]="form.MaterialDensityLbsLcy" name="MaterialDensityLbsLcy" type="number"></ion-input>
              </ion-col>
            </ion-row>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Blast (Reference Only)</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-textarea class="borderInput" [(ngModel)]="form.Blast" name="Blast" rows="2"></ion-textarea>
            </ion-col>
          </ion-row>

        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content>
        <ion-grid>
          <ion-row *ngFor="let field of ListFields; let i = index">
            <ion-col col-4>
              <ion-label>{{field.FieldName}}</ion-label>
            </ion-col>
            <ion-col col-8>
            <ion-input *ngIf="field.FieldType == fieldsType.FieldTextBox" (ngModel)="form.text.field.FieldName" class="borderInput" name="{{field.FieldNameKey}}" required></ion-input>
              <ion-input *ngIf="field.FieldType == fieldsType.FieldNumber" type="number" class="borderInput" (ngModel)="form.number.field.FieldName" name="{{field.FieldNameKey}}" required></ion-input>
              <ion-select *ngIf="field.FieldType == fieldsType.FieldOption" (ngModel)="form.option.field.FieldName" name="{{field.FieldNameKey}}" >
                <ion-option value="opt1" >Option 1</ion-option>
              </ion-select>
              <ion-toggle *ngIf="field.FieldType == fieldsType.FieldToggle" (ngModel)="form.option.field.FieldName" name="{{field.FieldNameKey}}" checked="{{checked}}" ></ion-toggle>
            </ion-col>
          </ion-row>

        </ion-grid>
      </ion-card-content>
    </ion-card>
    <ion-card class="card">
      <ion-card-header>
        <ion-label> Segments </ion-label>
      </ion-card-header>
      <ion-card-content>
        <ion-list >
          <ion-item *ngFor="let segments of listSegments">
            {{segments.SectionName}}
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-grid>
      <ion-row text-center>
        <ion-col col-12>
          <button ion-button round outline type="submit"> Begin Study </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
